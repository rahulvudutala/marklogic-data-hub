<!doctype html>
<!--[if lt IE 7 ]><html itemscope itemtype="http://schema.org/Organization" id="ie6" class="ie ie-old" lang="en-US"><![endif]-->
<!--[if IE 7 ]>   <html itemscope itemtype="http://schema.org/Organization" id="ie7" class="ie ie-old" lang="en-US"><![endif]-->
<!--[if IE 8 ]>   <html itemscope itemtype="http://schema.org/Organization" id="ie8" class="ie ie-old" lang="en-US"><![endif]-->
<!--[if IE 9 ]>   <html itemscope itemtype="http://schema.org/Organization" id="ie9" class="ie" lang="en-US"><![endif]-->
<!--[if gt IE 9]><!--><html itemscope itemtype="http://schema.org/Organization" lang="en-US"><!--<![endif]-->
<head>

    <!-- Meta -->
    <meta charset="utf-8">
    <title>Flow Tracing - Data Hub Framework</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Favicons -->
    <link rel="shortcut icon" sizes="16x16 24x24 32x32 48x48 64x64 96x96" href="/marklogic-data-hub/favicon.ico">
    <meta name="application-name" content="Data Hub Framework - A data hub framework for MarkLogic">
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-6638631-15', 'auto');
      ga('send', 'pageview');

    </script>

    <!-- Facebook Pixel Code -->
    <script>
    !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
    n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
    document,'script','https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '1879746318909687'); // Insert your pixel ID here.
    fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=1879746318909687&ev=PageView&noscript=1"
    /></noscript>
    <!-- DO NOT MODIFY -->
    <!-- End Facebook Pixel Code -->
    <link type="text/css" rel="stylesheet" href="/marklogic-data-hub/assets/bundle.css">
</head>
<body class="">

    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/marklogic-data-hub">
                  <span class="logo">
                    <img src="/marklogic-data-hub/images/logo-marklogic.svg" width="150px" height="36px" alt="MarkLogic" title="MarkLogic" scale="0">
                  </span>
                  Data Hub Framework
                </a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav navbar-right">
                    
                        <li  >
                            
                            <a href="/marklogic-data-hub/">Getting Started</a>
                            
                        </li>
                    
                        <li  >
                            
                            <a href="/marklogic-data-hub/tutorial/">Tutorial</a>
                            
                        </li>
                    
                        <li  >
                            
                            <a href="https://github.com/marklogic/marklogic-data-hub">DHF on GitHub</a>
                            
                        </li>
                    
                </ul>
            </div>
        </div>
    </nav>




  <div class="bannered-image">
  <picture>
    <source srcset="/marklogic-data-hub/images/Solution-enterprise-data-hub-xs.jpg" media="(max-width: 400px)">
    <source srcset="/marklogic-data-hub/images/Solution-enterprise-data-hub-sm.jpg" media="(max-width: 800px)">
    <source srcset="/marklogic-data-hub/images/Solution-enterprise-data-hub-lg.jpg" media="(min-width: 801px)">
    <img srcset="/marklogic-data-hub/images/Solution-enterprise-data-hub-lg.jpg" alt="Operational Data Hub" scale="0">
  </picture>
  <div class="banner banner-light banner-center text-center">
    <div class="center-container">
      <div class="centered-text">
        <div class="col-sm-12 text-right text-center">
          <img alt="dhf icon" src="/marklogic-data-hub/images/odh.svg" scale="0" class="icon-left">
          <h3>
          
            Flow Tracing
          
          </h3>
        </div>
      </div>
    </div>
  </div>
</div>


  <article>
    <div class="container">
      <div class="row">
        <div class="side-nav col-md-2 hide-small">
          <div class="panel panel-default">
  <div class="panel-heading">Navigation</div>
  <ul class="list-group">
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/">Getting Started</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/understanding/">Understanding DHF</a>
    
    
      <ul class="list-group">
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/understanding/concepts/">Concepts</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/understanding/architecture/">Organization</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/understanding/how-it-works/">How It Works</a>
    
    
  </li>
  
  <li  class="list-group-item active"  >
    
    <a href="/marklogic-data-hub/understanding/flowtracing/">Flow Tracing</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/understanding/project-structure/">Project Structure</a>
    
    
  </li>
  
</ul>

    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/tutorial/">Tutorial</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/using/">Using DHF</a>
    
    
      <ul class="list-group">
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/project/">Create a Project</a>
    
    
      <ul class="list-group">
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/project/quickstart/">QuickStart</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/project/gradle/">Gradle Plugin</a>
    
    
  </li>
  
</ul>

    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/ingest/">Ingest</a>
    
    
      <ul class="list-group">
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/ingest/quickstart/">QuickStart</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/ingest/mlcp/">MLCP</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/ingest/marklogic-client-api/">Java Client API</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/ingest/rest/">REST Client API</a>
    
    
  </li>
  
</ul>

    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/harmonize/">Harmonize</a>
    
    
      <ul class="list-group">
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/harmonize/quickstart/">QuickStart</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/harmonize/gradle/">Gradle</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/harmonize/java/">Java Library</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/harmonize/rest/">REST</a>
    
    
  </li>
  
</ul>

    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/serve/">Serve (REST, ODBC)</a>
    
    
  </li>
  
</ul>

    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/docs/">Docs</a>
    
    
      <ul class="list-group">
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/docs/server-side/">Server Side (xqy, sjs)</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/docs/gradle-tasks/">Gradle Tasks</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/javadocs/">Javadocs</a>
    
    
  </li>
  
</ul>

    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="/marklogic-data-hub/faqs/">FAQs</a>
    
    
  </li>
  
  <li  class="list-group-item"  >
    
    <a href="https://github.com/marklogic/marklogic-data-hub">DHF on GitHub</a>
    
    
  </li>
  
</ul>

</div>

        </div>
        <div class="col-md-10">
          <!--- DHFPROD-646 TODO since this is primarily a debugging thing, does it make more sense under Using the DHF than under Concepts? -->

<p>Flow tracing produces a detailed view of the flows as they happened. For each plugin in a flow, the inputs and outputs to that plugin are recorded into the Traces database. Flow tracing is great for debugging your flows because you can see exactly what came in and went out of each step. You can use flow tracing to track down bugs in your flows as well as performance issues.</p>

<p>Flow tracing can be enabled and disabled as needed. We recommend you disable flow tracing in production as there is a performance penalty for writing the additional trace information. Any uncaught exception will always result in a flow tracing event, regardless of whether tracing is currently enabled.</p>

<p>Flow tracing can be viewed with several UIs, described below.</p>

<h2 id="controlling-flow-tracing-events">Controlling Flow Tracing Events</h2>
<p>A flag in the Modules database controls whether flow tracing is turned on. There are two ways to enable and disable flow tracing: using a gradle task, or via the QuickStart UI.</p>

<h3 id="enabling-and-disabling-via-gradle">Enabling and Disabling via Gradle</h3>
<p>In the directory where the project framework code lives, run these commands to enable/disable flow tracing:</p>

<h4 id="enable">Enable</h4>

<div class="code-tabs">
  <ul class="nav nav-tabs" role="tablist">
    <li role="presentation" class="active">
      <a role="tab" aria-controls="linux-1" href="#linux-1">Unix Systems</a>
    </li>
    <li role="presentation" class="">
      <a role="tab" aria-controls="windows-1" href="#windows-1">Windows</a>
    </li>
  </ul>
  <div class="tab-content">
    <div role="tabpanel" class="tab-pane active" id="linux-1">
      <pre class="cmdline">./gradlew hubEnableTracing</pre>
    </div>
    <div role="tabpanel" class="tab-pane" id="windows-1">
      <pre class="cmdline">gradlew.bat hubEnableTracing</pre>
    </div>
  </div>
</div>

<h4 id="disable">Disable</h4>

<div class="code-tabs">
  <ul class="nav nav-tabs" role="tablist">
    <li role="presentation" class="active">
      <a role="tab" aria-controls="linux-2" href="#linux-2">Unix Systems</a>
    </li>
    <li role="presentation" class="">
      <a role="tab" aria-controls="windows-2" href="#windows-2">Windows</a>
    </li>
  </ul>
  <div class="tab-content">
    <div role="tabpanel" class="tab-pane active" id="linux-2">
      <pre class="cmdline">./gradlew hubDisableTracing</pre>
    </div>
    <div role="tabpanel" class="tab-pane" id="windows-2">
      <pre class="cmdline">gradlew.bat hubDisableTracing</pre>
    </div>
  </div>
</div>

<h3 id="enabling-and-disabling-via-the-quickstart-ui">Enabling and Disabling via the Quickstart UI</h3>
<p>Navigate to the Settings screen in QuickStart. On that page, you will find a selector to enable and disable flow tracing.</p>

<p><img src="/marklogic-data-hub/images/traces/FlowTracingEnableDisableViaQuickStart.png" alt="Quickstart enable disable" /></p>

<h2 id="flow-tracing-database">Flow Tracing Database</h2>
<p>All flow tracing events are stored to a separate database created when you initialized your project. By default, the database is called <em>your-project-name</em>-TRACING. An application server is created that is associated with this database, which provides a UI you can use to view the trace events. The default port for this application server is 8012.</p>

<h2 id="viewing-flow-tracing">Viewing Flow Tracing</h2>
<h3 id="viewing-with-quickstart">Viewing with QuickStart</h3>
<p>You can view flow tracing events with QuickStart.</p>

<p>From the main QuickStart dashboard, select Traces.</p>

<p><img src="/marklogic-data-hub/images/traces/DisplayingTracingInQuickstartScreen1.png" alt="Displaying traces Quickstart 1" /></p>

<p>This will show a list of all events currently in the database. Note that you can search the text of the trace events via the search bar. All text in the trace events is indexed and searchable.</p>

<p><img src="/marklogic-data-hub/images/traces/DisplayingTracingInQuickstartScreen2.png" alt="Displaying traces Quickstart 2" /></p>

<p>Selecting a single trace event will display the detailed flow.</p>

<p><img src="/marklogic-data-hub/images/traces/DisplayingSingleTraceInQuickstart.png" alt="Displaying single trace Quickstart" /></p>

<h3 id="viewing-with-the-trace-viewer">Viewing with the Trace Viewer</h3>
<p>You can also view flow tracing events with a Trace Viewer provided in the application server associated with the TRACING database (by default installed on port 8012). This UI is installed into MarkLogic and you do not need a separate tool to view it.</p>

<p>Navigate your browser to the port running the <code class="highlighter-rouge">TRACES</code> application server, by default on port 8012. You will be presented with the dedicated Trace Viewer application.</p>

<p><img src="/marklogic-data-hub/images/traces/DisplayingTracingInDedicatedApp.png" alt="Displaying all traces dedicated" /></p>

<p>Selecting a single tracing event will display the detailed flow.</p>

<p><img src="/marklogic-data-hub/images/traces/DisplayingSingleTraceInDedicatedApp.png" alt="Displaying single trace dedicated" /></p>

<h2 id="cleaning-up-traces">Cleaning up Traces</h2>
<p>You can delete traces by deleting the job that created them. To do so, go to the Jobs page, click the checkboxes for the Jobs you wish to delete, click <code class="highlighter-rouge">ACTION</code>, then select “Delete Jobs and Traces”. After confirming, the selected jobs and the associated traces will be removed from the Jobs and Traces databases.</p>

<p><img src="/marklogic-data-hub/images/traces/DeleteJobs.png" alt="Displaying deletion of a job" /></p>

<h2 id="exporting-traces">Exporting TRACES</h2>
<p>You can export jobs and traces associated with those jobs. Go to the Jobs page, click the checkboxes for the Jobs you wish to export, click <code class="highlighter-rouge">ACTION</code>, then select “Export Jobs and Traces”. After confirming, the selected jobs and their associated traces will be exported to a zip file, which your browser will download. This feature is generally used to help communicate with MarkLogic’s support team.</p>

        </div>
      </div>
    </div>
  </article>


    <footer class="site-footer">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <p>
                    Copyright © 2016-2018 MarkLogic Corporation. All Rights Reserved. MARKLOGIC® is a registered trademark of MarkLogic Corporation.
                    </p>
                </div>
            </div>
        </div>
    </footer>


    <!--[if lt IE 9]>
        <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
        <script src="/marklogic-data-hub/js/respond.min.js"></script>
    <![endif]-->

    <script type="text/javascript" src="/marklogic-data-hub/assets/bundle.js" id="1"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-79716597-1', 'auto');
      ga('send', 'pageview');
    </script>
  </body>
</html>

